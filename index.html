<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Molscreen Simple</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        video { width: 100vw; height: 100vh; object-fit: cover; }
    </style>
</head>
<body>

<video id="mainPlayer" autoplay muted playsinline></video>

<script>
    const playlist = [
        "https://www.dropbox.com/scl/fi/cgq2z7linqasvqezbm8ab/gochits.mp4?rlkey=274k4goiciju5otq7qizctanh&st=u2qj0hb9&raw=1",
        "https://www.dropbox.com/scl/fi/b5h43u2gtqa9tb7mcvxg0/goge.mp4?rlkey=1zcjj2h6t7wvp3xz4kplnednr&st=ad2g4vla&raw=1",
        "https://www.dropbox.com/scl/fi/e2taoclzs6h5d09bi6vh2/kfc.mp4?rlkey=ti378vkzzqshy98i4xg7e2z13&st=xo7uj41y&raw=1",
        "https://www.dropbox.com/scl/fi/fjlmicsw8e3wocrnwvobh/mallscreen_promo.mp4?rlkey=7toe1bduhyx9ly42h7qbj1u23&st=fo8by9by&raw=1",
        "https://www.dropbox.com/scl/fi/k4pkuv2rqtzviddjnv5an/marge.mp4?rlkey=6a0d94c1shuqp9usqwggjxeim&st=by7r8osn&raw=1",
        "https://www.dropbox.com/scl/fi/7whs9yqdaiq0o4mvlarhb/satamashoebi.mp4?rlkey=dgqeekoyj8etov8on6k8vrxoy&st=i3z5izrb&raw=1",
        "https://www.dropbox.com/scl/fi/mbmod4obbvmuyiofc77ml/velosipedebi.mp4?rlkey=8gnk7u7w1hrzsvrd7z42n0dzk&st=4xjy6085&raw=1"
    ];

    const player = document.getElementById('mainPlayer');
    let currentIndex = 0;

    function playNext() {
        if (currentIndex >= playlist.length) {
            currentIndex = 0;
        }
        
        console.log("Playing:", playlist[currentIndex]);
        player.src = playlist[currentIndex];
        
        player.play().catch(error => {
            console.error("Error playing video, skipping...", error);
            currentIndex++;
            playNext();
        });

        currentIndex++;
    }

    // როცა ვიდეო დამთავრდება
    player.onended = () => {
        playNext();
    };

    // პირველი გაშვება
    playNext();

    // Service Worker-ის სრული წაშლა (რომ ძველმა კოდმა ხელი არ შეგვიშალოს)
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(regs => {
            for(let reg of regs) reg.unregister();
        });
    }
</script>
</body>
</html>

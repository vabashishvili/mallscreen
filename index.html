<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Molscreen Pro</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000; cursor: none; }
        #player-container { position: relative; width: 100vw; height: 100vh; }
        video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity 0.8s ease-in-out; background: black; }
        .hidden { opacity: 0; z-index: 1; }
        .visible { opacity: 1; z-index: 2; }
    </style>
</head>
<body>
    <div id="player-container">
        <video id="video1" class="visible" autoplay muted playsinline></video>
        <video id="video2" class="hidden" muted playsinline></video>
    </div>

    <script>
        const playlist = [
            "https://www.dropbox.com/scl/fi/cgq2z7linqasvqezbm8ab/gochits.mp4?rlkey=274k4goiciju5otq7qizctanh&st=u2qj0hb9&raw=1",
            "https://www.dropbox.com/scl/fi/b5h43u2gtqa9tb7mcvxg0/goge.mp4?rlkey=1zcjj2h6t7wvp3xz4kplnednr&st=ad2g4vla&raw=1",
            "https://www.dropbox.com/scl/fi/e2taoclzs6h5d09bi6vh2/kfc.mp4?rlkey=ti378vkzzqshy98i4xg7e2z13&st=xo7uj41y&raw=1",
            "https://www.dropbox.com/scl/fi/fjlmicsw8e3wocrnwvobh/mallscreen_promo.mp4?rlkey=7toe1bduhyx9ly42h7qbj1u23&st=fo8by9by&raw=1",
            "https://www.dropbox.com/scl/fi/k4pkuv2rqtzviddjnv5an/marge.mp4?rlkey=6a0d94c1shuqp9usqwggjxeim&st=by7r8osn&raw=1",
            "https://www.dropbox.com/scl/fi/7whs9yqdaiq0o4mvlarhb/satamashoebi.mp4?rlkey=dgqeekoyj8etov8on6k8vrxoy&st=i3z5izrb&raw=1",
            "https://www.dropbox.com/scl/fi/mbmod4obbvmuyiofc77ml/velosipedebi.mp4?rlkey=8gnk7u7w1hrzsvrd7z42n0dzk&st=4xjy6085&raw=1"
        ];

        let currentIndex = 0;
        const videos = [document.getElementById('video1'), document.getElementById('video2')];
        let activeVideoIndex = 0;

        async function setupVideo(videoElement, index) {
            const url = playlist[index];
            videoElement.src = url; 
            videoElement.load();
        }

        function swapVideos() {
            const currentVideo = videos[activeVideoIndex];
            activeVideoIndex = 1 - activeVideoIndex;
            const nextVideo = videos[activeVideoIndex];

            nextVideo.play().then(() => {
                nextVideo.className = 'visible';
                currentVideo.className = 'hidden';
                
                currentIndex = (currentIndex + 1) % playlist.length;
                setupVideo(currentVideo, (currentIndex + 1) % playlist.length);
            }).catch(e => {
                console.error("Play error, retrying...", e);
                setTimeout(swapVideos, 1000);
            });
        }

        // პირველი გაშვება
        videos[0].src = playlist[0];
        videos[1].src = playlist[1];
        videos[0].onended = swapVideos;
        videos[1].onended = swapVideos;

        // თუ Service Worker-მა გაჭედა, წავშალოთ
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(regs => {
                for(let reg of regs) reg.unregister();
            });
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Molscreen Seamless</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; cursor: none; }
        #container { position: relative; width: 100vw; height: 100vh; }
        video { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            object-fit: cover; opacity: 0; transition: opacity 0.5s ease-in-out; 
        }
        .active { opacity: 1; z-index: 10; }
    </style>
</head>
<body>
    <div id="container">
        <video id="p1" muted playsinline></video>
        <video id="p2" muted playsinline></video>
    </div>

<script>
    const playlist = [
        "https://www.dropbox.com/scl/fi/cgq2z7linqasvqezbm8ab/gochits.mp4?rlkey=274k4goiciju5otq7qizctanh&st=u2qj0hb9&raw=1",
        "https://www.dropbox.com/scl/fi/b5h43u2gtqa9tb7mcvxg0/goge.mp4?rlkey=1zcjj2h6t7wvp3xz4kplnednr&st=ad2g4vla&raw=1",
        "https://www.dropbox.com/scl/fi/e2taoclzs6h5d09bi6vh2/kfc.mp4?rlkey=ti378vkzzqshy98i4xg7e2z13&st=xo7uj41y&raw=1",
        "https://www.dropbox.com/scl/fi/fjlmicsw8e3wocrnwvobh/mallscreen_promo.mp4?rlkey=7toe1bduhyx9ly42h7qbj1u23&st=fo8by9by&raw=1",
        "https://www.dropbox.com/scl/fi/k4pkuv2rqtzviddjnv5an/marge.mp4?rlkey=6a0d94c1shuqp9usqwggjxeim&st=by7r8osn&raw=1",
        "https://www.dropbox.com/scl/fi/7whs9yqdaiq0o4mvlarhb/satamashoebi.mp4?rlkey=dgqeekoyj8etov8on6k8vrxoy&st=i3z5izrb&raw=1",
        "https://www.dropbox.com/scl/fi/mbmod4obbvmuyiofc77ml/velosipedebi.mp4?rlkey=8gnk7u7w1hrzsvrd7z42n0dzk&st=4xjy6085&raw=1"
    ];

    let currentIdx = 0;
    const players = [document.getElementById('p1'), document.getElementById('p2')];
    let activePlayerIdx = 0;

    function loadVideo(player, url) {
        player.src = url;
        player.load();
    }

    async function switchPlayer() {
        const currentPlayer = players[activePlayerIdx];
        const nextPlayerIdx = 1 - activePlayerIdx;
        const nextPlayer = players[nextPlayerIdx];

        // შემდეგი ვიდეოს ინდექსი
        currentIdx = (currentIdx + 1) % playlist.length;
        
        // ვრთავთ შემდეგს
        nextPlayer.play().then(() => {
            nextPlayer.classList.add('active');
            currentPlayer.classList.remove('active');
            activePlayerIdx = nextPlayerIdx;

            // ვამზადებთ შემდეგი გადართვისთვის წინა პლეიერს
            setTimeout(() => {
                const futureIdx = (currentIdx + 1) % playlist.length;
                loadVideo(currentPlayer, playlist[futureIdx]);
            }, 1000);
        });
    }

    // ინიციალიზაცია
    players[0].onended = switchPlayer;
    players[1].onended = switchPlayer;

    // პირველი ჩატვირთვა
    loadVideo(players[0], playlist[0]);
    loadVideo(players[1], playlist[1]);

    players[0].oncanplaythrough = () => {
        if (!players[0].classList.contains('active') && currentIdx === 0) {
            players[0].classList.add('active');
            players[0].play();
        }
    };
</script>
</body>
</html>
